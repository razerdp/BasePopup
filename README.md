# BasePopup
æŠ½è±¡å‡ºä¸€ä¸ªæ–¹ä¾¿è‡ªå®šä¹‰çš„Basepopupç±»ï¼Œæ›´åŠ æ–¹ä¾¿çš„åˆ›å»ºå‡ºä¸€ä¸ªpopupä»¥åŠåŠ¨ç”»æ•ˆæœ

---

[![](https://jitpack.io/v/razerdp/BasePopup.svg)](https://jitpack.io/#razerdp/BasePopup)

## è¯·æ³¨æ„ï¼š

**å¦‚æœæ‚¨æ˜¯ä»ä½äºv1.3.0ç‰ˆæœ¬å‡çº§è¿‡æ¥çš„ï¼Œè¯·æŸ¥çœ‹æ”¹åŠ¨æ—¥å¿—ï¼Œä»v1.3.0ç‰ˆæœ¬å¼€å§‹ï¼Œå¯¹äºä¸€äº›è¯¯å¯¼æ€§çš„é—®é¢˜å’Œæ–¹æ³•åå­—è¿›è¡Œäº†æ”¹åŠ¨ï¼Œè¿™å°†ä¼šå¯¼è‡´è¯¥ç‰ˆæœ¬å‰çš„æ–¹æ³•éœ€è¦é‡æ–°å¤å†™**

[æ”¹åŠ¨æ—¥å¿—](https://github.com/razerdp/BasePopup/blob/master/CHANGELOG-CN.md)


**é’ˆå¯¹Android 7.0çš„é—®é¢˜ï¼Œå®˜æ–¹å¯¹äºpopupåœ¨7.0ç¡®å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œå…·ä½“æ˜¯showAsDropDownæ–¹æ³•æœ‰é—®é¢˜**

**@link https://code.google.com/p/android/issues/detail?id=221001**


---

## æœ€æ–°æ”¹åŠ¨ï¼š

##### 1.8.5
  - ç°åœ¨å¯ä»¥åœ¨onCreateé‡Œé¢showPopupå•¦~
  - setæ–¹æ³•è¿”å›`BasePopupWindow`ï¼Œå¯ä»¥æ¥ä¸ªâ€œä¼ªé“¾å¼â€è°ƒç”¨å“ˆå“ˆ
  - é’ˆå¯¹è¯¸ä½æå‡ºçš„setBackPressåœ¨6.0ä»¥ä¸Šå¤±æ•ˆçš„é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¿™ä»½MDæ–‡ä»¶ï¼ˆæ²¡é”™ï¼Œæš‚æ—¶æ— æ³•ä¿®å¤ï¼‰

##### 1.8.4:
  - è¡¥å……PopupWindowProxyçš„scanForActivityæ–¹æ³•ï¼ˆä¸çŸ¥æ˜åŸå› åœ¨mergedåä¸¢å¤±äº†ï¼‰

##### 1.8.3:
  - æ„é€ å™¨ä¸å†é™å®šä¸ºactivityï¼Œcontexté‡‡ç”¨å¼±å¼•ç”¨

##### 1.8.1~1.8.2:
  - å–æ¶ˆç‰ˆæœ¬å·å¸¦"v"çš„é—®é¢˜
  - ä¿®å¤äº†å±•ç¤ºpopupWindowæ—¶ä¼šå¯¼è‡´é€€å‡ºæ²‰æµ¸çŠ¶æ€çš„é—®é¢˜
  - éƒ¨åˆ†é—®é¢˜æš‚æ—¶æ— æ³•ä¿®å¤ï¼ˆå¦‚input methodå’Œfull screençš„å†²çªå¯¼è‡´æ— æ³•é‡æ–°é€‚åº”å¸ƒå±€çš„é—®é¢˜ï¼‰

##### v1.8.0:
 - é›†ä¸­ä¿®å¤äº†offsetè®¡ç®—é—®é¢˜ã€7.0çš„showAsDropDownçš„é—®é¢˜ï¼Œå¦‚æœæ‚¨è¿˜æœ‰ä»€ä¹ˆç–‘é—®ï¼Œè¯·åœ¨issueé‡Œé¢æå‡º

##### v1.7.2:
 - ç›®å‰ä»…åŠ äº†é’ˆå¯¹4.3çš„å´©æºƒä¿®å¤
 - æ„Ÿè°¢[@hshare](https://github.com/hshare) æäº¤çš„pr
 - å¯¹äºissueé‡Œé¢çš„é—®é¢˜ï¼Œæ„Ÿè°¢å„ä½çš„åé¦ˆï¼Œæœ€è¿‘æœ‰ç‚¹å¿™ï¼Œç¨åä¼šé›†ä¸­å¤„ç†çš„-V-æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒ


### æœ€ä½SDKç‰ˆæœ¬è¦æ±‚ : API 11

# ä¾èµ–  [![](https://jitpack.io/v/razerdp/BasePopup.svg)](https://jitpack.io/#razerdp/BasePopup)
#### è¯·æ³¨æ„ã€1.8.1ä¹‹å‰è®°å¾—å¸¦"v"ï¼Œå¦‚"v1.8.0"ï¼Œ1.8.1ä¹‹åä¸éœ€è¦ã€‘

**Step 1.**

**æ·»åŠ Jitpackåˆ°æ‚¨çš„root gradleï¼Œå¦‚æœæ— æ³•å¯¼åŒ…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯è¿™ä¸ªåŸå› ï¼Œè¯·ä»”ç»†æ£€æŸ¥**

```xml
	allprojects {
		repositories {
			...
			maven { url "https://jitpack.io" }
		}
	}
```

**Step 2.**

æ·»åŠ ä¾èµ–ï¼ˆè¯·æŠŠæœ€æ–°ç‰ˆæ›¿æ¢æˆä¸Šé¢çš„jitpackæ ‡ç­¾æ‰€ç¤ºç‰ˆæœ¬ï¼‰

```xml
	dependencies {
	        compile 'com.github.razerdp:BasePopup:æœ€æ–°ç‰ˆ'
	}
```

# ä½¿ç”¨æ–¹æ³•

----------

**Step 1:**

åƒæ‚¨å¹³æ—¶å®šåˆ¶activityå¸ƒå±€æ–‡ä»¶ä¸€æ ·å®šåˆ¶æ‚¨çš„popupå¸ƒå±€ï¼ˆè¯·æ³¨æ„ï¼Œå±•ç¤ºåŠ¨ç”»çš„é‚£ä¸ªviewå¿…é¡»æ˜¯popupviewçš„å­viewï¼‰

etc.
```xml
<?xml version="1.0" encoding="utf-8"?>

<!--æ ¹å¸ƒå±€ï¼Œå¸¸ç”¨ä½œè’™å±‚ï¼ˆå°±æ˜¯å˜æš—çš„èƒŒæ™¯ï¼‰-->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#8f000000">
    
    <!--æ’­æ”¾åŠ¨ç”»çš„å†…å®¹ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯popupçš„ä¸»è¦å†…å®¹å¸ƒå±€-->
    <RelativeLayout
        android:id="@+id/popup_anima"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_dialog"
        android:layout_centerInParent="true"
        android:layout_margin="25dp">
        
        
        <... many views>
        
        

    </RelativeLayout>
</RelativeLayout>
```
![image](https://github.com/razerdp/BasePopup/blob/master/img/etc.png)


**Step 2:**

æ–°å»ºä¸€ä¸ªç±»ç»§æ‰¿Basepopup

**Step 3:**

å®ç°å¿…è¦çš„å‡ ä¸ªæ–¹æ³•ï¼š

`initShowAnimation()`:åˆå§‹åŒ–ä¸€ä¸ªè¿›å…¥åŠ¨ç”»ï¼Œè¯¥åŠ¨ç”»å°†ä¼šç”¨åˆ°`initAnimaView()`è¿”å›çš„view

`onCreatePopupView()`:åˆå§‹åŒ–æ‚¨çš„popupwindowç•Œé¢ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨`createPopupById()`

`getClickToDismissView()`:å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç‚¹å‡»dismiss popupwindowçš„view(ä¹Ÿè®¸æ˜¯é®ç½©å±‚ä¹Ÿè®¸æ˜¯æŸä¸ªviewï¼Œè¿™ä¸ªéšæ‚¨å–œæ¬¢)

ä¾‹å¦‚

```java
public class DialogPopup extends BasePopupWindow implements View.OnClickListener{

    private TextView ok;
    private TextView cancel;

    public DialogPopup(Activity context) {
        super(context);

        ok= (TextView) findViewById(R.id.ok);
        cancel= (TextView) findViewById(R.id.cancel);

        setViewClickListener(this,ok,cancel);
    }

    @Override
    protected Animation initShowAnimation() {
        AnimationSet set=new AnimationSet(false);
        Animation shakeAnima=new RotateAnimation(0,15,Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF,0.5f);
        shakeAnima.setInterpolator(new CycleInterpolator(5));
        shakeAnima.setDuration(400);
        set.addAnimation(getDefaultAlphaAnimation());
        set.addAnimation(shakeAnima);
        return set;
    }

    @Override
    protected View getClickToDismissView() {
        return getPopupWindowView();
    }

    @Override
    public View onCreatePopupView() {
        return createPopupById(R.layout.popup_dialog);
    }

    @Override
    public View initAnimaView() {
        return findViewById(R.id.popup_anima);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()){
            case R.id.ok:
                Toast.makeText(getContext(),"click the ok button",Toast.LENGTH_SHORT).show();
                break;
            case R.id.cancel:
                Toast.makeText(getContext(),"click the cancel button",Toast.LENGTH_SHORT).show();
                break;
            default:
                break;
        }

    }
}
```

**Step 4:**

æŠŠæ‚¨åˆšæ‰å®ç°çš„popupç»™newå‡ºæ¥å¹¶è°ƒç”¨showæ–¹æ³•

ä¾‹å¦‚

```java
    DialogPopup popup = new DialogPopup(context);
    popup.showPopupWindow();
```

# ä¸€äº›ä¾‹å­
![image](https://github.com/razerdp/BasePopup/blob/master/img/comment_popup_with_exitAnima.gif)
![image](https://github.com/razerdp/BasePopup/blob/master/img/scale_popup.gif)
![image](https://github.com/razerdp/BasePopup/blob/master/img/slide_from_bottom_popup.gif)
![image](https://github.com/razerdp/BasePopup/blob/master/img/input_popup.gif)
![image](https://github.com/razerdp/BasePopup/blob/master/img/list_popup.gif)
![image](https://github.com/razerdp/BasePopup/blob/master/img/menu_popup.gif)

ä¾‹å­æ›´æ–°æ—¥å¿—:

https://github.com/razerdp/BasePopup/blob/master/UpdateLog.md

# æ–¹æ³•ä»‹ç»ï¼š
è¯·çœ‹wikiï¼ˆé™†ç»­å®Œå–„ä¸­ï¼‰

**LinkğŸ‘‰**[WIKI](https://github.com/razerdp/BasePopup/wiki)

# ä»£ç è§£æï¼š
http://www.jianshu.com/p/069f57e14a9c

### æ‰“èµï¼ˆæ‚¨çš„æ”¯æŒæ˜¯æˆ‘ç»´æŠ¤çš„åŠ¨åŠ›-V-æ„¿æ„çš„è¯ï¼Œç»™ä¸ªé›¶é£Ÿå‘—ï¼‰
![wechat](https://github.com/razerdp/BasePopup/blob/master/img/wechat.jpg)



### License
Apache-2.0
