BasePopupï¼ˆv2ï¼‰
-------------
**è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿå®ç°PopupWindowçš„åŸºç±»ï¼Œæœ¬åŸºç±»æ˜“äºæ‰©å±•ï¼Œå¹¶ä¸”å‡ ä¹æ²¡æœ‰ä½¿ç”¨é™åˆ¶ï¼Œä¾¿äºæ‚¨å¿«é€Ÿå®ç°å„ç§å„æ ·çš„PopupWindowã€‚**


| **Release** | **Candy** | **License** | **Api** | **Author** |
| ---- | ---- | ---- | ---- | ---- |
| [![Download](https://api.bintray.com/packages/razerdp/maven/BasePopup/images/download.svg) ](https://bintray.com/razerdp/maven/BasePopup/_latestVersion) | [![Download](https://api.bintray.com/packages/razerdp/maven/BasePopup_Candy/images/download.svg) ](https://bintray.com/razerdp/maven/BasePopup_Candy/_latestVersion)| [![license](https://img.shields.io/badge/license-Apache--2.0-blue.svg )](https://github.com/razerdp/BasePopup/blob/master/LICENSE) | [![Api](https://img.shields.io/badge/Api-16%2B-green.svg)](https://img.shields.io/badge/Api-14%2B-green.svg) | [![Author](https://img.shields.io/badge/Author-razerdp-blue.svg)](https://github.com/razerdp) |


æ³¨æ„äº‹é¡¹
----

Android På·²ç»é€‚é…ï¼Œæ„Ÿè°¢[@Guolei1130](https://github.com/Guolei1130)æ”¶é›†çš„æ–¹æ³•ã€‚

æ–‡ç« åœ°å€ï¼š[android_p_no_sdkapi_support](https://github.com/Guolei1130/android_p_no_sdkapi_support)

æœ¬åº“ä¸€å¼€å§‹é‡‡ç”¨360çš„æ–¹æ³•ï¼Œä½†ä¸å¾—ä¸èµ°Nativeï¼Œä¸ºäº†ä¸ªPopupä¸å¾—ä¸å¼•å…¥soæ„Ÿè§‰å¾ˆä¸å€¼å¾—ï¼Œåœ¨çœ‹åˆ°è¿™ç¯‡æ–‡ç« åï¼Œæ‰æƒ³èµ·UnSafeç±»

æœ¬åº“é‡‡ç”¨æ–¹æ³•5ã€‚

å¦‚æœä»¥åUnSafeç±»ç§»é™¤æ‰çš„è¯ï¼Œå†è€ƒè™‘Nativeæ–¹æ³•ã€‚

æœ€åå†ä¸€æ¬¡æ„Ÿè°¢å¤§ç‰›æä¾›çš„æ–¹æ³•~

---

**è¯·åŠ¡å¿…æŸ¥çœ‹æ›´æ–°æ—¥å¿—å’Œä¾‹å­é¢„è§ˆï¼Œé‡Œé¢ä¼šè¯¦ç»†è§£é‡Šæ¯ä¸ªç‰ˆæœ¬å¢åŠ æˆ–ä¿®å¤çš„åŠŸèƒ½**

**è¯·æ³¨æ„å¼•ç”¨ç‰ˆæœ¬çš„é—®é¢˜ï¼ŒReleaseç‰ˆæœ¬æ˜¯ç¨³å®šç‰ˆï¼Œå¯å•†ç”¨ã€‚**

**Candyä¸ç¨³å®šï¼ˆä¸”æ›´æ–°å¾ˆé¢‘ç¹ï¼‰ï¼Œä½†åŒ…å«ç€æ–°åŠŸèƒ½æˆ–è€…æ–°çš„ä¼˜åŒ–ï¼Œä¸å»ºè®®å•†ç”¨ã€‚**

[**v1.x READ_ME**](https://github.com/razerdp/BasePopup/blob/master/README_OLD.md)

[**1.xè¿ç§»åˆ°2.xå¸®åŠ©æ–‡æ¡£**](https://github.com/razerdp/BasePopup/blob/master/1.x%E8%BF%81%E7%A7%BB2.x%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3.md)

[**æ›´æ–°æ—¥å¿—**](https://github.com/razerdp/BasePopup#%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97%E5%8E%86%E5%8F%B2%E6%9B%B4%E6%96%B0)

[**ä¾‹å­é¢„è§ˆ**](https://github.com/razerdp/BasePopup#%E4%B8%80%E4%BA%9B%E4%BE%8B%E5%AD%90)


ä¾èµ–
---

| **Release** | **Candy** |
| ---- | ---- |
| [![Download](https://api.bintray.com/packages/razerdp/maven/BasePopup/images/download.svg) ](https://bintray.com/razerdp/maven/BasePopup/_latestVersion) | [![Download](https://api.bintray.com/packages/razerdp/maven/BasePopup_Candy/images/download.svg) ](https://bintray.com/razerdp/maven/BasePopup_Candy/_latestVersion) |


æ·»åŠ ä¾èµ–ï¼ˆè¯·æŠŠ{latestVersion}æ›¿æ¢æˆä¸Šé¢çš„Jcenteræ ‡ç­¾æ‰€ç¤ºç‰ˆæœ¬

**ã€candyç‰ˆæœ¬ä¸ä¸€å®šç¨³å®šï¼ŒåŒ…å«æœ‰æ–°åŠŸèƒ½æˆ–è€…æ–°çš„ä¿®å¤ï¼Œå®Œå–„åå°†ä¼šå‘å¸ƒå…¶releaseç‰ˆã€‘**

```xml
	dependencies {
	        implementation 'com.github.razerdp:BasePopup:{latestVersion}'
	        
	        //candyç‰ˆæœ¬ï¼Œä¸ç¨³å®šï¼Œä½†ä¼šå¸¦æœ‰æ–°åŠŸèƒ½
	        //implementation 'com.github.razerdp:BasePopup_Candy:{latestVersion}'
	}
```


ä½¿ç”¨æ–¹æ³•
----

### æ–¹æ³•ä¸€
----

* **Step 1:**

åƒæ‚¨å¹³æ—¶å®šåˆ¶activityå¸ƒå±€æ–‡ä»¶ä¸€æ ·å®šåˆ¶æ‚¨çš„popupå¸ƒå±€

etc.
```xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_dialog"
        android:layout_centerInParent="true"
        android:layout_margin="25dp">
        
        
        <... many views>
        
        

    </RelativeLayout>
</RelativeLayout>
```
![image](https://github.com/razerdp/BasePopup/blob/master/img/etc.png)


* **Step 2:**

æ–°å»ºä¸€ä¸ªç±»ç»§æ‰¿BasePopupWindow

* **Step 3:**

å®ç°å¿…è¦çš„å‡ ä¸ªæ–¹æ³•ï¼š

**è¯¥æ–¹æ³•ä»2.0.6å¼€å§‹ä¸å†æŠ½è±¡å¼ºåˆ¶å®ç°ï¼Œä½†å»ºè®®å®ç°å…¥åœºå’Œé€€åœºåŠ¨ç”»** `onCreateShowAnimation()`/`onCreateDismissAnimation()`:åˆå§‹åŒ–ä¸€ä¸ªæ˜¾ç¤º/é€€å‡ºåŠ¨ç”»ï¼Œè¯¥åŠ¨ç”»å°†ä¼šç”¨åˆ°`onCreatePopupView()`æ‰€è¿”å›çš„view,å¯ä»¥ä¸ºç©ºã€‚

`onCreatePopupView()`:åˆå§‹åŒ–æ‚¨çš„popupwindowç•Œé¢ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨`createPopupById()`


ä¾‹å¦‚

```java
public class DialogPopup extends BasePopupWindow implements View.OnClickListener{

    private TextView ok;
    private TextView cancel;

    public DialogPopup(Activity context) {
        super(context);

        ok= (TextView) findViewById(R.id.ok);
        cancel= (TextView) findViewById(R.id.cancel);

        setViewClickListener(this,ok,cancel);
    }

    @Override
    protected Animation onCreateShowAnimation() {
        AnimationSet set=new AnimationSet(false);
        Animation shakeAnima=new RotateAnimation(0,15,Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF,0.5f);
        shakeAnima.setInterpolator(new CycleInterpolator(5));
        shakeAnima.setDuration(400);
        set.addAnimation(getDefaultAlphaAnimation());
        set.addAnimation(shakeAnima);
        return set;
    }

    @Override
    protected Animation onCreateDismissAnimation() {
        return null;
    }

    @Override
    public View onCreateContentView() {
        return createPopupById(R.layout.popup_dialog);
    }

    @Override
    public void onClick(View v) {
        //... click event
    }
}
```

* **Step 4:**

æŠŠæ‚¨åˆšæ‰å®ç°çš„popupç»™newå‡ºæ¥å¹¶è°ƒç”¨showæ–¹æ³•

ä¾‹å¦‚

```java
    DialogPopup popup = new DialogPopup(context);
    popup.showPopupWindow();
```

----

### æ–¹æ³•äºŒ
----
å¦‚æœæ‚¨å¹¶ä¸éœ€è¦å¾ˆè¯¦ç»†çš„å®šä¹‰ä¸€ä¸ªPopupWindowï¼Œæ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©`QuickPopupBuilder`é‡‡å–é“¾å¼å†™æ³•å¿«é€Ÿç¼–å†™å‡ºä¸€ä¸ªPopupä»¥ä½¿ç”¨ã€‚

```java
    QuickPopupBuilder.with(getContext())
                     .contentView(R.layout.popup_menu_small)
                     .wrapContentMode()
                     .config(new QuickPopupConfig()
                                .withShowAnimation(enterAnimation)
                                .withDismissAnimation(dismissAnimation)
                                .offsetX(offsetX, offsetRatioOfPopupWidth)
                                .offsetY(offsetY, offsetRatioOfPopupHeight)
                                .blurBackground(true, new BasePopupWindow.OnBlurOptionInitListener() {
                                    @Override
                                    public void onCreateBlurOption(PopupBlurOption option) {
                                        option.setBlurRadius(6)
                                                .setBlurPreScaleRatio(0.9f);
                                    }
                                })
                                .withClick(R.id.tx_1, new View.OnClickListener() {
                                    @Override
                                    public void onClick(View v) {
                                        ToastUtils.ToastMessage(getContext(), "tx1");
                                    }
                                }))
                     .show(v);
````





**ps:ä»1.9.0-alphaå¼€å§‹æ”¯æŒèƒŒæ™¯æ¨¡ç³Šï¼ˆåªéœ€è¦ä¸€ä¸ªæ–¹æ³•ï¼š`setBlurBackgroundEnable()`ï¼‰**

**RenderScriptæœ€ä½æ”¯æŒapi 17ï¼ˆæ›´ä½çš„æƒ…å†µå°†ä¼šä½¿ç”¨fastblurï¼‰ï¼Œæ‚¨éœ€è¦åœ¨gradleé…ç½®ä¸€ä¸‹ä»£ç **

```xml
defaultConfig {
        renderscriptTargetApi 25
        renderscriptSupportModeEnabled true
    }
```

æ–¹æ³•ä»‹ç»ï¼š
---

è¯·çœ‹wikiï¼ˆé™†ç»­å®Œå–„ä¸­ï¼‰

**LinkğŸ‘‰**[WIKI](https://github.com/razerdp/BasePopup/wiki)

äº¤æµç¾¤ï¼š590777418
---

å› ä¸ºç›®å‰è¿˜æœ‰æœ‹å‹åœˆé¡¹ç›®ï¼Œå»ºç«‹äº†ä¸€ä¸ªäº¤æµç¾¤ï¼Œå‡ºäºæ‡’å¾—ç®¡ç†é‚£ä¹ˆå¤šï¼Œæ‰€ä»¥å¦‚æœæœ‰æƒ³æ³•æˆ–è€…ä¼˜åŒ–å»ºè®®æˆ–è€…å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿åŠ å…¥â€œæœ‹å‹åœˆäº¤æµç¾¤â€

![](https://github.com/razerdp/FriendCircle/blob/master/qqgroup.png)

æ‰“èµï¼ˆçœ‹åœ¨æˆ‘é‚£ä¹ˆåŠªåŠ›ç»´æŠ¤çš„ä»½ä¸Šã€‚ã€‚ã€‚ç»™ä¸ªé›¶é£Ÿå‘—~ï¼‰
---

| å¾®ä¿¡ |æ”¯ä»˜å® | 
| ---- | ---- | 
| ![](https://github.com/razerdp/FriendCircle/blob/master/wechat.png)      | ![](https://github.com/razerdp/FriendCircle/blob/master/alipay.png) |




æ›´æ–°æ—¥å¿—([å†å²æ›´æ–°](https://github.com/razerdp/BasePopup/blob/master/UpdateLog.md))
----------------------------------------

* **ã€Releaseã€‘2.0.8.1**(2018/10/29)
  * **å»ºè®®æ›´æ–°åˆ°è¿™ä¸ªç‰ˆæœ¬ï¼**
  * fixed [#94](https://github.com/razerdp/BasePopup/issues/94)
  * ç´§æ€¥ä¿®å¤ä¸€ä¸ªä¸¥é‡çš„bug[#95](https://github.com/razerdp/BasePopup/issues/95)ï¼Œæ„Ÿè°¢[@tpnet](https://github.com/tpnet)
  * ä¼˜åŒ–ä»£ç 

* **ã€Releaseã€‘2.0.8**(2018/10/29)
  * fixed [#93](https://github.com/razerdp/BasePopup/issues/93)
  * ä¿®å¤éƒ¨åˆ†å´©æºƒé—®é¢˜ï¼Œå‘å¸ƒrelease

* **ã€Candyã€‘2.0.8-alpha3**(2018/10/25)
  * fixed [#87](https://github.com/razerdp/BasePopup/issues/87)ã€[#89](https://github.com/razerdp/BasePopup/issues/89)ã€[#90](https://github.com/razerdp/BasePopup/issues/90)

* **ã€Candyã€‘2.0.8-alpha2**(2018/10/19)
  * ä¿®å¤QuickPopupBuilderçš„clickäº‹ä»¶æ— å“åº”é—®é¢˜ï¼Œå¢åŠ backgroundæ–¹æ³•
  * ä¿®å¤è®¾ç½®background(0)æ—¶æ— æ³•æ‰¾åˆ°èµ„æºè€Œå´©æºƒçš„é—®é¢˜

* **ã€Releaseã€‘2.0.7**(2018/10/15)
  * ç»•å¼€Android Pçš„éå…¬å¼€apiæ–¹æ³•åå°„
    * æ€è·¯å‚è€ƒ&&æ„Ÿè°¢[android_p_no_sdkapi_support](https://github.com/Guolei1130/android_p_no_sdkapi_support)
  * å‘å¸ƒ2.0.7 release
    
  
* **ã€Releaseã€‘2.0.6**(2018/10/09)
  * ä¸å†æŠ½è±¡å¼ºåˆ¶å®ç°å…¥åœºå’Œé€€åœºåŠ¨ç”»
  * é’ˆå¯¹è‡ªåŠ¨å¼¹å‡ºè¾“å…¥æ³•çš„Popupï¼Œåœ¨dismiss()ä¸­é»˜è®¤å…³é—­è¾“å…¥æ³•


ä¸€äº›ä¾‹å­
---

| å¯¹åº”popup | é¢„è§ˆ |
| :---- | ---- |
| [LocatePopupFrag.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/fragment/LocatePopupFrag.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/locate_popup.gif) |
| [BlurSlideFromBottomPopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/BlurSlideFromBottomPopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/blur_popup.gif) |
| [CommentPopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/CommentPopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/comment_popup_with_exitAnima.gif) |
| [ScalePopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/ScalePopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/scale_popup.gif) |
| [SlideFromBottomPopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/SlideFromBottomPopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/slide_from_bottom_popup.gif) |
| [InputPopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/InputPopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/input_popup.gif) |
| [ListPopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/ListPopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/list_popup.gif) |
| [MenuPopup.java](https://github.com/razerdp/BasePopup/blob/master/app/src/main/java/razerdp/demo/popup/MenuPopup.java)     | ![image](https://github.com/razerdp/BasePopup/blob/master/img/menu_popup.gif) |


License
---

Apache-2.0
